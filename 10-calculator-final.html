
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>calculator with localStorage</title>
  <link rel="stylesheet" href="css/calc-style.css">
</head>
<body>
  <div class="container">
    <p>NOTHING LIKE<img src="static/img/casio-logo.png" alt="casio logo" class="logo"></p>
    <div class="calculation-result-window">
      <p class="js-result"></p>
    </div>
    <div class="calculation-buttons">
      <p>
        <button onclick="updateCalculation('1')">1</button>    
        <button onclick="updateCalculation('2')">2</button>
        <button onclick="updateCalculation('3')">3</button>
        <button onclick="updateCalculation(' + ')" class="orange-btn">+</button>
      </p>
      <p>
        <button onclick="updateCalculation('4')">4</button>
        <button onclick="updateCalculation('5')">5</button>
        <button onclick="updateCalculation('6')">6</button>
        <button onclick="updateCalculation(' - ')" class="orange-btn">-</button>
      </p>
      <p>
        <button onclick="updateCalculation('7')">7</button>    
        <button onclick="updateCalculation('8')">8</button>
        <button onclick="updateCalculation('9')">9</button>
        <button onclick="updateCalculation(' * ')" class="orange-btn">*</button>
      </p>
      <p>
        <button onclick="updateCalculation('0')">0</button>    
        <button onclick="updateCalculation('.')">.</button>
        <button onclick="
          calculation =
            eval(calculation);
            displayCalculation();
            localStorage.setItem('calculation', calculation);">=
        </button>
      
        <button onclick="updateCalculation(' / ');" class="orange-btn">/</button>
      </p>
      
      <p>
        <button onclick="
          calculation = '';
          displayCalculation();
          saveCalculation();
        ">
          Clear
        </button>
        <button onclick="
          calculation = removeLastChar(calculation);
          displayCalculation();
          saveCalculation();
        ">
          C
        </button>
      </p>
    </div>
  </div>
    

  


  <script>
    let calculation = localStorage.getItem('calculation') || '';

    displayCalculation();

    const calculationDisplay = document.getElementById('calculationDisplay');

    function updateCalculation(value) {
      calculation += value;
      displayCalculation();
      saveCalculation();  
    }

    function saveCalculation() {
      localStorage.setItem('calculation', calculation);
    }

    function displayCalculation() {
      if ( calculation === undefined ) {
        return '0';
      } else {
      document.querySelector('.js-result')
        .innerHTML = calculation;
      }
    }

    function removeLastChar(calculation) {
      const trimmedCalculation = calculation.replace(/\s+$/, '');      
      return trimmedCalculation.slice(0, trimmedCalculation.length - 1);
    }

  </script>
</body>
</html>